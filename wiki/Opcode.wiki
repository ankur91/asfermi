#summary This page describes the opcode format of fermi

Note: information here is not organised. Many parts may be unclear and confusing. Information may be inaccurate.

<wiki:toc max_depth="3"/>

= Opcode Information =
Currently 2 types of opcodes found: 4-byte and 8-byte. For instruction names and their identifier bits (na, nb), see [Instructions], [nanb].

----
== 8-byte ==
General format:
{{{
LSB                                                                MSB
xxx0 xxxxxx xxxx xxxxxx xxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx xxxxxx
  na    mod   pr    re1    re0                             imme     nb
}}}
The numbering below, such as mod0, start from the MSB

{{{
#na, nb:
Identifier bits.
These two bit fields specify the instruction name. Invalid bits result in invalid opcode.

#mod:
Modifier bits. Instruction-specific.
Eg.:
mod5: 1: .S to mov32i
mod4: 1: .X to lop32i
mod3: 0: .AND; 1: .OR; all added to lop32i
mod2: 1: .XOR to lop32i
mod2-3: 11: .PASS_B to lop32i
mod1: no effect seen so far
mod0: 1: ~on second operator of lop32i

#pr:
Predicate bits
pr0: 1: negate predicate
pr1~3: predicate number, 0-6
pr: 1111: @!pt. what is pt?
pr: 1110: No predicate used

#re0, re1:
registers
re1 is often the destination reg.

#imme:
This field contains immediate value for certain instructions
Eg. 
/*0000*/     /*0x00005de428004404*/ 	MOV R1, c [0x1] [0x100];
0010 011110 1110 100000 000000 0000000010000000 1000 100000000000 010100
                                          0x100  0x1 another mod
imme0: No use here
imme1:.ALU
imme2:.XLU, cannot be set with imme1
imme10-11:  11: 16-bit immediate
            10: constant mem
            01: invalid
            00: reg to reg

Sometimes it could also contain the third register used by the instruction.
}}}

----
== 4-byte ==
General format:
{{{
LSB                               MSB
xxx1xxx   x     xx xxxx xxxxxx xxxxxx xxxxxx
     na mod  immeb   pr    re1    re0  immea
}}}

----
==Specific Instructions==
The following presents the opcode of various instructions. Information may be incorrect. Information for various modifiers is not yet added.

=== Data Movement Instructions ===

==== MOV ====
{{{
0010 011110 1110 xxxxxx xxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx 010100
}}}

==== LD ====
{{{
1010 000100 1110 xxxxxx xxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx 000001
}}}

==== ST ====
{{{
1010 000100 1110 xxxxxx xxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx 001001
}}}

=== Execution Control Instructions ===
==== EXIT ====
{{{
1110 011110 1110 000000 000000 00000000000000000000000000000000 000001
}}}
=== Floating Point Instructions ===
==== FADD ====
{{{
0000 000000 1110 xxxxxx xxxxxx xxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxx 001010
}}}

=== Integer Instructions ===
==== IADD ====
{{{
1100 000000 1110 xxxxxx xxxxxx xxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxx 010010
}}}